<div class="container mt-4">

  <h2>コミュニティ作成</h2>

  <% if @community.errors.any? %>
    <div class="alert alert-danger">
      <ul>
        <% @community.errors.each do |attr, msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <%= form_with model: @community, local: true do |f| %>
    <%= render "form", f: f %>

    <div class="mb-3">
      <%= f.label :name, "コミュニティ名" %>
      <%= f.text_field :name, class: "form-control" %>
    </div>

    <div class="mb-3">
      <%= f.label :description, "説明" %>
      <%= f.text_area :description,
                      rows: 5,
                      class: "form-control" %>
    </div>

    <!-- ◆ 画像アップロード -->
      <div class="form-group mb-3">
        <%= f.label :image, "コミュニティ画像（任意）" %>
        <%= f.file_field :image, class: "form-control" %>

        <% if @community.image.attached? %>
          <p class="mt-2">現在の画像：</p>
          <%= image_tag @community.image.variant(resize_to_limit: [300, 300]) %>
        <% end %>
      </div>

    <%= f.submit "作成する",
                 class: "btn btn-primary" %>
  <% end %>

</div>
