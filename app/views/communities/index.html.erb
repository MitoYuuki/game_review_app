<div class="container mt-4">
  <div class="row">

    <!-- ▼ 左サイド：カテゴリ -->
    <aside class="col-12 col-md-3 mb-4">
      <h5 data-bs-toggle="collapse" data-bs-target="#communityCategoryList" style="cursor: pointer;">
        コミュニティカテゴリ ▼
      </h5>

      <ul id="communityCategoryList" class="list-group collapse show">
        <% @categories.each do |category| %>
          <li class="list-group-item">
            <%= link_to category.name, category_path(category) %>
          </li>
        <% end %>
      </ul>
    </aside>

    <!-- ▼ 右側：コミュニティ一覧 -->
    <div class="col-12 col-md-9">

      <h2 class="mb-3">コミュニティ一覧</h2>

      <%= link_to "コミュニティを作成する",
                  new_community_path,
                  class: "btn btn-primary mb-3" %>

      <% @communities.each do |community| %>
        <div class="card p-3 mb-3">

          <h4>
            <%= link_to community.name, community_path(community), class: "text-info" %>
          </h4>

          <p>
            <strong>カテゴリ：</strong>
            <%= community.category&.name || "未設定" %>
          </p>

          <p>
            作成者：
            <%= link_to community.owner.name, user_path(community.owner) %>
          </p>

          <p>
            メンバー：<%= community.members.count %>人　
            トピック：<%= community.topics.count %>件
          </p>

          <p><%= truncate(community.description, length: 80) %></p>

        </div>
      <% end %>

    </div>

  </div>
</div>
